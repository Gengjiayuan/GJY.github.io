```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>ç ”é€‰å¸ˆ Â· è¶…è¯¦ç»†ä¸ªæ€§ç‰¹è´¨æµ‹è¯„</title>
    <!-- Font Awesome 6 (å…è´¹å›¾æ ‡) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'PingFang SC', Roboto, system-ui, -apple-system, sans-serif;
        }
        body {
            background: linear-gradient(145deg, #f0f7ff 0%, #e6f0fa 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items:flex-start;
            padding: 20px 12px;
        }
        .page-container {
            max-width: 520px;
            width: 100%;
            background-color: rgba(255,255,255,0.7);
            backdrop-filter: blur(8px);
            border-radius: 40px;
            box-shadow: 0 20px 40px rgba(20, 50, 80, 0.2);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.5);
        }
        .inner-card {
            background: white;
            border-radius: 32px;
            padding: 24px 20px;
            margin: 12px;
            box-shadow: 0 8px 20px rgba(0,20,40,0.05);
        }
        h1 {
            font-size: 28px;
            color: #1e3c72;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        .subhead {
            color: #4a6a8b;
            font-size: 14px;
            border-left: 4px solid #ffb25b;
            padding-left: 16px;
            margin-bottom: 24px;
            background: #fef8f0;
            border-radius: 0 20px 20px 0;
            line-height: 1.5;
        }
        .question-block {
            background: #f9fcff;
            border-radius: 28px;
            padding: 18px 16px;
            margin-bottom: 16px;
            border: 1px solid #e2edff;
            transition: all 0.15s;
        }
        .q-title {
            font-weight: 600;
            color: #122b44;
            margin-bottom: 14px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .q-num {
            background: #1e3c72;
            color: white;
            width: 26px;
            height: 26px;
            border-radius: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 500;
        }
        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .option-item {
            background: white;
            border-radius: 40px;
            padding: 12px 18px;
            border: 1px solid #dbe6f2;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: 0.1s;
            box-shadow: 0 2px 6px rgba(0,0,0,0.01);
        }
        .option-item.selected {
            border: 2px solid #1e3c72;
            background: #edf5ff;
            box-shadow: 0 6px 12px rgba(30,60,114,0.1);
        }
        .option-item input[type="radio"] {
            appearance: none;
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border: 2px solid #b0c8e0;
            border-radius: 50%;
            margin-right: 16px;
            position: relative;
            transition: 0.1s;
        }
        .option-item input[type="radio"]:checked {
            border-color: #1e3c72;
            background: #1e3c72;
            box-shadow: inset 0 0 0 5px white;
        }
        .option-text {
            flex: 1;
            font-size: 15px;
            color: #1f2e46;
        }
        .btn-primary {
            background: #1e3c72;
            color: white;
            border: none;
            border-radius: 60px;
            padding: 18px 30px;
            font-size: 18px;
            font-weight: 600;
            width: 100%;
            margin-top: 16px;
            margin-bottom: 12px;
            box-shadow: 0 12px 20px rgba(30,60,114,0.3);
            cursor: pointer;
            transition: 0.15s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn-primary:active {
            transform: scale(0.97);
            background: #163158;
        }
        .btn-secondary {
            background: white;
            border: 1.5px solid #1e3c72;
            color: #1e3c72;
            border-radius: 40px;
            padding: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
        }
        /* æŠ¥å‘Šæ ·å¼ */
        .report-grid {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .report-card {
            background: #f9fcff;
            border-radius: 28px;
            padding: 18px;
            border: 1px solid #e2edff;
        }
        .badge-large {
            background: linear-gradient(145deg, #ffffff, #f0f7ff);
            border-radius: 36px;
            padding: 24px 20px;
            box-shadow: inset 0 -2px 0 #d9e5f0;
        }
        .mbti-display {
            font-size: 52px;
            font-weight: 800;
            color: #122b44;
            letter-spacing: 6px;
            line-height: 1;
        }
        .pill-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 16px 0;
        }
        .pill {
            background: #e1eaf5;
            border-radius: 40px;
            padding: 10px 18px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            font-size: 14px;
        }
        .color-dot {
            width: 48px;
            height: 48px;
            border-radius: 48px;
            background: #7a5f4b;
            border: 3px solid white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .animal-icon {
            font-size: 48px;
            filter: drop-shadow(2px 6px 8px rgba(0,0,0,0.1));
        }
        .progress-chart {
            background: #f2f7ff;
            border-radius: 28px;
            padding: 18px;
        }
        .chart-bar {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 14px;
        }
        .bar-label {
            width: 90px;
            font-size: 14px;
            font-weight: 500;
        }
        .bar-bg {
            flex: 1;
            height: 18px;
            background: #d6e2f0;
            border-radius: 30px;
            overflow: hidden;
        }
        .bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #3d6cb0, #1e3c72);
            border-radius: 30px;
            width: 0%;
        }
        .match-tag {
            background: #1e3c72;
            color: white;
            border-radius: 30px;
            padding: 6px 14px;
            display: inline-block;
            font-size: 13px;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        .insight-box {
            background: white;
            border-radius: 24px;
            padding: 16px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.02);
            margin-top: 12px;
        }
        .mini-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 12px;
        }
        .mini-card {
            background: white;
            border-radius: 20px;
            padding: 14px;
            border: 1px solid #eaf0f8;
        }
        .quote {
            font-style: italic;
            color: #3a5670;
            background: #ecf3fa;
            border-radius: 20px;
            padding: 14px;
            margin: 12px 0;
        }
        .hidden {
            display: none;
        }
        .footer-note {
            color: #6b85a4;
            font-size: 13px;
            text-align: center;
            margin: 16px 0 8px;
        }
        hr {
            border: 1px solid #e1ecf9;
            margin: 16px 0;
        }
    </style>
</head>
<body>
<div class="page-container" id="app">
    <div class="inner-card" id="quizSection">
        <h1><i class="fas fa-compass" style="color: #ff9f4b;"></i> ç ”é€‰å¸ˆ</h1>
        <div class="subhead">é’å°‘å¹´ç ”å­¦ä¸ªæ€§ç‰¹è´¨æµ‹è¯„ Â· 15é¢˜<br>ä»è®¤çŸ¥Â·æƒ…ç»ªåŒç»´åº¦ä¸ºä½ ç²¾å‡†ç”»åƒ</div>
        <!-- é—®å·åŠ¨æ€æ’å…¥ -->
        <div id="quizContainer"></div>
        <button class="btn-primary" id="submitQuiz"><i class="fas fa-magic"></i> ç”Ÿæˆä¸“å±æŠ¥å‘Š</button>
        <div class="footer-note">åŒ—äºŒå¤–ã€Œç ”é€‰å¸ˆã€åŸºäºæ•™è‚²å¿ƒç†å­¦</div>
    </div>

    <div class="inner-card hidden" id="reportSection">
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
            <i class="fas fa-crown" style="color: #f5b342; font-size: 28px;"></i>
            <h2 style="color:#1e3c72; font-size: 24px;">ä½ çš„ç ”å­¦è¶…è¯¦ç»†æŠ¥å‘Š</h2>
        </div>
        <div id="reportContent" class="report-grid"></div>
        <button class="btn-secondary" id="restartQuiz"><i class="fas fa-redo-alt"></i> é‡æ–°æµ‹è¯„</button>
        <div style="text-align: center; margin: 20px 0 8px;">
            <i class="fas fa-share-alt" style="color:#7f9bc0; background: #eaf1fb; padding: 10px 20px; border-radius: 40px;" onclick="alert('åˆ†äº«ç»™å¥½å‹ï¼Œçœ‹çœ‹TAæ˜¯ä»€ä¹ˆç ”å­¦äººæ ¼ï½')"> åˆ†äº«æŠ¥å‘Š</i>
        </div>
    </div>
</div>

<script>
    (function() {
        // ----- å®šä¹‰é—®å·é¢˜ç›® (å®Œæ•´15é¢˜ï¼Œç¬¬7é¢˜å·²è¡¥å…¨) -----
        const questions = [
            {
                part: 'åŸºç¡€é€‚é…',
                text: '1. ä½ çš„å¹´é¾„ä¸å­¦ä¸šé˜¶æ®µï¼Ÿ',
                options: ['A.10-12å²ï¼Œå°å­¦é«˜æ®µ', 'B.13-15å²ï¼Œåˆä¸­æ®µ', 'C.16-19å²ï¼Œé«˜ä¸­æ®µ']
            },
            {
                text: '2. ä½ æœŸæœ›çš„ç ”å­¦çŸ¥è¯†æ·±åº¦æ˜¯ï¼Ÿ',
                options: ['A.ç§‘æ™®ä½“éªŒï¼šé‡åœ¨æ„ŸçŸ¥ä¸å‘ç°', 'B.æ¢ç©¶å­¦ä¹ ï¼šç»“åˆè¯¾æœ¬å®åœ°éªŒè¯', 'C.è¯¾é¢˜æ”»åšï¼šæ·±åº¦è°ƒç ”è®ºæ–‡ç´ æ']
            },
            {
                text: '3. ä½ çš„èº«ä½“èƒ½åŠ›æ›´é€‚é…å“ªç§ç ”å­¦å¼ºåº¦ï¼Ÿ',
                options: ['A.è½»é‡èˆ’é€‚ï¼šå®¤å†…åœºé¦†ä¸ºä¸»', 'B.æ´»åŠ›é€‚ä¸­ï¼šçŸ­é€”å¾’æ­¥/æ‰‹å·¥', 'C.æŒ‘æˆ˜è¿›é˜¶ï¼šç™»å±±/æº¯æºª/éª‘è¡Œ', 'D.ç‰¹æ®Šå¤‡æ³¨ï¼šæœ‰æ™•è½¦/è¿‡æ•ç­‰é™åˆ¶']
            },
            {
                part: 'å…´è¶£ä¸åå¥½',
                text: '4. ä½ æœ€æƒ³æ¢ç´¢çš„ç ”å­¦æ ¸å¿ƒé¢†åŸŸæ˜¯ï¼Ÿ',
                options: ['A.è‡ªç„¶ç§‘å­¦ï¼šç”Ÿæ€/åœ°è´¨/å¤©æ–‡', 'B.å·¥ç¨‹æŠ€æœ¯ï¼šAI/æœºå™¨äºº/å®éªŒ', 'C.äººæ–‡ç¤¾ç§‘ï¼šå†å²/éé—/è§„åˆ’', 'D.å•†ä¸šä¼ åª’ï¼šå“ç‰Œ/æ–‡æ—…/åˆ›ä½œ']
            },
            {
                text: '5. ä½ æ›´å€¾å‘äºå“ªç§ç ”å­¦äº’åŠ¨å½¢å¼ï¼Ÿ',
                options: ['A.ä¸“å®¶è®²å ‚ï¼šå¬å¤§å’–æ·±åº¦è§£æ', 'B.ä»»åŠ¡é—¯å…³ï¼šæ¸¸æˆåŒ–çº¿ç´¢è§£å¯†', 'C.èŒä¸šæ¨¡æ‹Ÿï¼šæ‰®æ¼”è§’è‰²å®Œæˆé¡¹ç›®', 'D.åœ†æ¡Œç ”è®¨ï¼šè¾©è®ºä¸æ·±åº¦äº¤æµ']
            },
            {
                text: '6. åœ¨ç ”å­¦é¡¹ç›®ä¸­ï¼Œä½ æœ€æƒ³æ‹…ä»»çš„è§’è‰²æ˜¯ï¼Ÿ',
                options: ['A.æ€»ç­–åˆ’ï¼šç»Ÿç­¹å…¨å±€æ‹†è§£ä»»åŠ¡', 'B.ç ”ç©¶å‘˜ï¼šèµ„æ–™æŸ¥é˜…æ•°æ®åˆ†æ', 'C.å®è·µå®¶ï¼šåŠ¨æ‰‹æ“ä½œå®åœ°é‡‡æ ·', 'D.ä¼ æ’­è€…ï¼šæˆæœå±•ç¤ºå¯¹å¤–å®£è®²']
            },
            {
                text: '7. ä»¥ä¸‹å“ªç§ç‰¹è‰²å†…å®¹æœ€èƒ½å¸å¼•ä½ æŠ¥åï¼Ÿ',
                options: ['A. ç‹¬å®¶ä¸“å®¶è®²åº§+äº’åŠ¨', 'B. æ²‰æµ¸å¼å‰§æƒ…ä»»åŠ¡é—¯å…³', 'C. äº²æ‰‹åˆ›ä½œå¯å¸¦èµ°çš„ä½œå“', 'D. è·å¾—é«˜å«é‡‘é‡è¯ä¹¦/æ¨èä¿¡']
            },
            {
                text: '8. ä½ å¯¹ç ”å­¦ç›®çš„åœ°çš„åå¥½æ˜¯ï¼Ÿ',
                options: ['A.ç§‘æŠ€å‰æ²¿ï¼šç§‘æŠ€é¦†/èˆªå¤©', 'B.äººæ–‡åº•è•´ï¼šåšç‰©é¦†/å¤é•‡', 'C.è‡ªç„¶é‡è¶£ï¼šå›½å®¶å…¬å›­/åœ°è´¨', 'D.åˆ›æ„é«˜åœ°ï¼šæ–‡åˆ›å›­/è®¾è®¡å·¥åŠ']
            },
            {
                part: 'å­¦ä¹ é£æ ¼ä¸MBTI',
                text: '9. å­¦ä¹ æ–°çŸ¥è¯†æ—¶ï¼Œä½ æ•ˆç‡æœ€é«˜çš„æ–¹å¼æ˜¯ï¼Ÿ',
                options: ['A.è§†è§‰å‹ï¼šå›¾è¡¨/è§†é¢‘', 'B.å¬è§‰å‹ï¼šè®²è§£/è®¨è®º', 'C.åŠ¨è§‰å‹ï¼šäº²æ‰‹æ“ä½œ/ä½“éªŒ', 'D.è¯»å†™å‹ï¼šæ–‡çŒ®/ç¬”è®°']
            },
            {
                text: '10. é¢å¯¹é™Œç”Ÿçš„ç ”å­¦ä»»åŠ¡ï¼Œä½ çš„ç¬¬ä¸€ååº”æ˜¯ï¼Ÿ',
                options: ['A.å…ˆçœ‹ç»†åˆ™ï¼ŒæŒ‰éƒ¨å°±ç­æ‰§è¡Œ', 'B.å…ˆæ¢è·¯å°è¯•ï¼Œçµæ´»è°ƒæ•´æ–¹æ¡ˆ']
            },
            {
                text: '11. åœ¨å›¢é˜Ÿåä½œä¸­ï¼Œä½ ä¸»è¦çš„èƒ½é‡æ¥æºæ˜¯ï¼Ÿ',
                options: ['A.äº’åŠ¨æ¿€å‘ï¼šå¤´è„‘é£æš´ä¸­äº§ç”Ÿçµæ„Ÿ', 'B.ç‹¬ç«‹æ²‰æ·€ï¼šå…ˆç‹¬ç«‹æ€è€ƒå†åˆ†äº«']
            },
            {
                text: '12. å¸æ”¶ä¿¡æ¯æ—¶ï¼Œä½ æ›´å…³æ³¨ï¼Ÿ',
                options: ['A.äº‹å®ç»†èŠ‚ï¼šå…·ä½“æ•°æ®/å¹´ä»£', 'B.å®è§‚å…³è”ï¼šé€»è¾‘/è¶‹åŠ¿/æ·±å±‚æ„ä¹‰']
            },
            {
                text: '13. å›¢é˜Ÿå†³ç­–å‡ºç°åˆ†æ­§æ—¶ï¼Œä½ æ›´å€¾å‘äºï¼Ÿ',
                options: ['A.ç†æ€§è£æ–­ï¼šå¯è¡Œæ€§ä¸æ•ˆç‡ä¼˜å…ˆ', 'B.å’Œè°å…±èµ¢ï¼šæˆå‘˜æ„Ÿå—ä¸å‡èšåŠ›']
            },
            {
                part: 'æ ¸å¿ƒè¯‰æ±‚',
                text: '14. ä½ æ“…é•¿çš„ç ”å­¦æˆæœè¾“å‡ºå½¢å¼æ˜¯ï¼Ÿ',
                options: ['A.é€»è¾‘ç±»ï¼šè®ºæ–‡/è°ƒæŸ¥æŠ¥å‘Š', 'B.è§†è§‰ç±»ï¼šPPT/æ‘„å½±/æ‰‹è´¦', 'C.å®ç‰©ç±»ï¼šæ¨¡å‹/æ‰‹å·¥è‰ºå“', 'D.åŠ¨æ€ç±»ï¼šè·¯æ¼”/çºªå½•ç‰‡']
            },
            {
                text: '15. ä½ å‚ä¸ç ”å­¦çš„æ ¸å¿ƒæœŸå¾…æ˜¯ï¼Ÿ',
                options: ['A.å¼€é˜”è§†é‡ï¼šè§è¯†ä¸ä¸€æ ·çš„ä¸–ç•Œ', 'B.èƒ½åŠ›è·ƒè¿ï¼šè§£å†³é—®é¢˜/åä½œ/åˆ›æ–°', 'C.å­¦ä¸šåŠ©åŠ›ï¼šå‡å­¦ç´ æ/ç«èµ›åŠ åˆ†']
            }
        ];

        // æ¸²æŸ“é—®å·
        const quizContainer = document.getElementById('quizContainer');
        function renderQuiz() {
            let html = '';
            questions.forEach((q, idx) => {
                if (q.part) {
                    html += `<div style="margin: 8px 0 4px; font-weight: 600; color:#4a6fa5;"><i class="fas fa-star"></i> ${q.part}</div>`;
                }
                html += `<div class="question-block" id="q${idx}">`;
                html += `<div class="q-title"><span class="q-num">${idx+1}</span> ${q.text}</div>`;
                html += `<div class="options-grid">`;
                q.options.forEach((opt, optIdx) => {
                    const optionId = `q${idx}_opt${optIdx}`;
                    html += `
                        <div class="option-item" onclick="selectOption('q${idx}', ${optIdx})">
                            <input type="radio" name="q${idx}" id="${optionId}" value="${optIdx}">
                            <label for="${optionId}" class="option-text">${opt}</label>
                        </div>
                    `;
                });
                html += `</div></div>`;
            });
            quizContainer.innerHTML = html;
        }
        renderQuiz();

        // å…¨å±€é€‰æ‹©å‡½æ•°
        window.selectOption = function(qName, optIdx) {
            document.querySelectorAll(`input[name="${qName}"]`).forEach((radio, idx) => {
                radio.checked = (idx === optIdx);
                const parent = radio.closest('.option-item');
                if (parent) {
                    if (idx === optIdx) parent.classList.add('selected');
                    else parent.classList.remove('selected');
                }
            });
        };

        // è·å–æ‰€æœ‰ç­”æ¡ˆ
        function getAnswers() {
            const answers = [];
            for (let i = 0; i < questions.length; i++) {
                const radios = document.getElementsByName(`q${i}`);
                let selectedVal = null;
                for (let j = 0; j < radios.length; j++) {
                    if (radios[j].checked) {
                        selectedVal = j;
                        break;
                    }
                }
                if (selectedVal === null) {
                    alert(`è¯·å…ˆå›ç­”ç¬¬ ${i+1} é¢˜`);
                    return null;
                }
                answers.push(selectedVal);
            }
            return answers;
        }

        // ----- æ‰©å±•æŠ¥å‘Šè®¡ç®— -----
        function computeReport(answers) {
            // æå–MBTI (10-13é¢˜ç´¢å¼•9,10,11,12)
            const ie = answers[10] === 0 ? 'E' : 'I';   // 11é¢˜
            const sn = answers[11] === 0 ? 'S' : 'N';   // 12é¢˜
            const tf = answers[12] === 0 ? 'T' : 'F';   // 13é¢˜
            const jp = answers[9] === 0 ? 'J' : 'P';    // 10é¢˜
            const mbti = ie + sn + tf + jp;

            // åŠ¨ç‰©å¡‘ (åŸºäºMBTI)
            const animalMap = {
                'ISTJ': { name: 'æµ·ç‹¸', icon: 'ğŸ¦«', desc: 'è¸å®å»ºé€ ï¼Œç»†èŠ‚å¤§å¸ˆï¼Œæœ‰æ¡ä¸ç´Š' },
                'ISFJ': { name: 'å¤§è±¡', icon: 'ğŸ˜', desc: 'å®ˆæŠ¤ä¼ ç»Ÿï¼Œæ¸©æš–å¯é ï¼Œé»˜é»˜æ”¯æŒ' },
                'INFJ': { name: 'ç‹¼', icon: 'ğŸº', desc: 'æ´å¯Ÿæ·±è¿œï¼Œå¼•é¢†åŒä¼´ï¼Œç†æƒ³ä¸»ä¹‰' },
                'INTJ': { name: 'é¹°', icon: 'ğŸ¦…', desc: 'é«˜ç»è¿œç©ï¼Œæˆ˜ç•¥å®¶ï¼Œç‹¬ç«‹æ€è€ƒ' },
                'ISTP': { name: 'çŒ«', icon: 'ğŸˆ', desc: 'å†·é™æ“ä½œï¼ŒåŠ¨æ‰‹é«˜æ‰‹ï¼Œæ“…é•¿å·¥å…·' },
                'ISFP': { name: 'é¹¿', icon: 'ğŸ¦Œ', desc: 'å®‰é™æ•æ„Ÿï¼Œè‰ºæœ¯æ°”è´¨ï¼Œäº²è¿‘è‡ªç„¶' },
                'INFP': { name: 'è´è¶', icon: 'ğŸ¦‹', desc: 'ç†æƒ³ä¸»ä¹‰è€…ï¼Œè¿½å¯»æ„ä¹‰ï¼Œå¯Œæœ‰åˆ›æ„' },
                'INTP': { name: 'çŒ«å¤´é¹°', icon: 'ğŸ¦‰', desc: 'é€»è¾‘æ€è¾¨ï¼Œçƒ­çˆ±ç†è®ºï¼ŒçŸ¥è¯†æ¸Šåš' },
                'ESTP': { name: 'ç‹ç‹¸', icon: 'ğŸ¦Š', desc: 'æœºæ•çµæ´»ï¼Œå†’é™©å®¶ï¼Œéšæœºåº”å˜' },
                'ESFP': { name: 'æ°´ç­', icon: 'ğŸ¦¦', desc: 'æ´»æ³¼çˆ±ç©ï¼Œç¤¾äº¤æ˜æ˜Ÿï¼Œæ„ŸæŸ“åŠ›å¼º' },
                'ENFP': { name: 'æµ·è±š', icon: 'ğŸ¬', desc: 'çƒ­æƒ…åˆ›æ„ï¼Œé¼“èˆä»–äººï¼Œå¥½å¥‡å¿ƒå¼º' },
                'ENTP': { name: 'é¹¦é¹‰', icon: 'ğŸ¦œ', desc: 'èƒ½è¨€å–„è¾©ï¼Œç‚¹å­ç‹ï¼Œçƒ­è¡·æŒ‘æˆ˜' },
                'ESTJ': { name: 'ç‹®å­', icon: 'ğŸ¦', desc: 'å¤©ç”Ÿé¢†è¢–ï¼Œäº•ç„¶æœ‰åºï¼Œæ‰§è¡ŒåŠ›å¼º' },
                'ESFJ': { name: 'é©¬', icon: 'ğŸ', desc: 'åˆä½œå‹å–„ï¼Œç…§é¡¾è€…ï¼Œè´£ä»»å¿ƒå¼º' },
                'ENFJ': { name: 'ç‹—', icon: 'ğŸ•', desc: 'å¿ è¯šæ¿€åŠ±ï¼Œæ•™è‚²å®¶ï¼Œå–„äºæ²Ÿé€š' },
                'ENTJ': { name: 'ç‹®é¹«', icon: 'ğŸ¦ğŸ”±', desc: 'ç»Ÿå¸…å…¨å±€ï¼Œæœæ–­ï¼Œè¿œè§å“è¯†' }
            };
            let animal = animalMap[mbti] || { name: 'å˜è‰²é¾™', icon: 'ğŸ¦', desc: 'é€‚åº”åŠ›å¼ºï¼Œå¤šé¢æ‰‹' };

            // æ—…è¡Œå½¢è±¡ (åŸºäºç¬¬4é¢˜ + ç¬¬6é¢˜)
            const field = answers[3]; // 4é¢˜: 0è‡ªç„¶ 1å·¥ç¨‹ 2äººæ–‡ 3å•†ä¸š
            const role = answers[5];   // 6é¢˜: 0ç­–åˆ’ 1ç ”ç©¶ 2å®è·µ 3ä¼ æ’­
            const travelImages = [
                ['è‡ªç„¶é¢†èˆªå‘˜', 'ç”Ÿæ€è®°å½•å®˜', 'é‡å¤–æ¢é™©å®¶', 'è‡ªç„¶ä¼ æ’­å¤§ä½¿'],
                ['ç§‘åˆ›æŒ‡æŒ¥å®˜', 'å®éªŒå®¤ç ”ç©¶å‘˜', 'æœºå™¨äººå»ºé€ å¸ˆ', 'ç§‘æŠ€å¸ƒé“å¸ˆ'],
                ['äººæ–‡ç­–å±•äºº', 'å†å²è€ƒæ®æ´¾', 'éé—ä¼ æ‰¿æ‰‹è‰ºäºº', 'æ–‡åŒ–è®²è¿°è€…'],
                ['å•†ä¸šä¸»ç†äºº', 'æ•°æ®åˆ†æå¸ˆ', 'æ–‡æ—…è¿è¥å®˜', 'æ–°åª’ä½“ä¼ æ’­å®˜']
            ];
            const travelImage = travelImages[field][role];

            // ä¸“å±é¢œè‰² (åŸºäºç¬¬3ã€8é¢˜)
            const intensity = answers[2]; // 0è½»é‡ 1æ´»åŠ› 2æŒ‘æˆ˜ 3ç‰¹æ®Š
            const destPref = answers[7];   // 0ç§‘æŠ€ 1äººæ–‡ 2è‡ªç„¶ 3åˆ›æ„
            let colorName, colorHex;
            if (destPref === 0) { colorName = 'æ˜Ÿé™…é“¶'; colorHex = '#95b8d9'; }
            else if (destPref === 1) { colorName = 'å¤åŸèµ­'; colorHex = '#b56f4a'; }
            else if (destPref === 2) { colorName = 'æ£®æ—ç»¿'; colorHex = '#3e7a5c'; }
            else { colorName = 'åˆ›æ„æ©™'; colorHex = '#f39c5c'; }
            if (intensity === 2) { colorName = 'å·…å³°è“'; colorHex = '#1e5f7a'; }

            // å­¦ä¹ é£æ ¼æè¿°
            const learnStyle = ['è§†è§‰å‹ ğŸ“º', 'å¬è§‰å‹ ğŸ§', 'åŠ¨è§‰å‹ ğŸ› ï¸', 'è¯»å†™å‹ ğŸ“š'][answers[8]];
            // å­¦ä¹ é£æ ¼å…·ä½“æ–¹å¼
            const learnMethod = ['å›¾åƒè§‚å¯Ÿ', 'å¬è§‰è®¨è®º', 'åŠ¨æ‰‹å®æ“', 'æ–‡å­—æ¢³ç†'][answers[8]];

            // èƒ½é‡æ¥æºæè¿°
            const energySource = answers[10] === 0 ? 'ä»å›¢é˜Ÿäº’åŠ¨ä¸­è·å–èƒ½é‡ï¼Œå–œæ¬¢å¤´è„‘é£æš´' : 'éœ€è¦ç‹¬å¤„æ—¶é—´æ¥æ²‰æ·€æ€è€ƒï¼Œå®‰é™çš„ç¯å¢ƒè®©ä½ æ¢å¤';
            // å†³ç­–åå¥½
            const decisionPref = answers[12] === 0 ? 'ç†æ€§å®¢è§‚ï¼Œä¼˜å…ˆè€ƒè™‘æ–¹æ¡ˆå¯è¡Œæ€§' : 'æ„Ÿæ€§å’Œè°ï¼Œæ³¨é‡å›¢é˜Ÿæ„Ÿå—å’Œæ°›å›´';
            // è¡ŒåŠ¨æ–¹å¼
            const actionStyle = answers[9] === 0 ? 'è®¡åˆ’å‹ï¼Œå–œæ¬¢æŒ‰æ­¥éª¤æ¨è¿›' : 'æ¢ç´¢å‹ï¼Œéšæœºåº”å˜äº«å—æœªçŸ¥';

            // é¢†åŸŸæ ‡ç­¾
            const fieldTag = ['è‡ªç„¶è¿·', 'ç§‘æŠ€æ§', 'å†å²å’–', 'å•†ä¸šæ–°æ˜Ÿ'][field];

            // æ¨èç ”å­¦ç±»å‹ (äº”å¤§ç±»)
            const recTypes = [];
            if (field === 0 || sn === 'N') recTypes.push('ğŸŒ¿ è‡ªç„¶ç§‘å­¦');
            if (field === 1 || (ie==='E' && answers[4]!==0)) recTypes.push('ğŸ¤– ç§‘æŠ€å®è·µ');
            if (field === 2 || sn==='S') recTypes.push('ğŸ›ï¸ äººæ–‡ç¤¾ç§‘');
            if (field === 3 || tf==='F') recTypes.push('ğŸ¨ è‰ºæœ¯åˆ›ä½œ');
            if (intensity >= 1 || jp==='P') recTypes.push('â›°ï¸ æˆ·å¤–æ‹“å±•');
            const uniqueRec = [...new Set(recTypes)].slice(0,4);
            while(uniqueRec.length<4) uniqueRec.push('ğŸŒ ç»¼åˆæ¢ç´¢');

            // å¤šç»´åº¦åˆ†æ•°
            const exploreScore = 60 + answers[0]*5 + (answers[3]===0?20:0) + (answers[14]===0?10:0);
            const socialScore = (ie==='E'? 80: 50) + (answers[10]===0?10:0) + (answers[4]===1?10:0);
            const handsOnScore = (answers[5]===2?90:60) + (answers[8]===2?15:0) + (answers[14]===2?10:0);
            const deepThinkScore = (answers[11]===1?85:60) + (answers[12]===0?10:0) + (answers[1]===2?15:0);
            const adventurousScore = (intensity*15 + 50) + (jp==='P'?20:0) + (answers[5]===2?10:0);
            const structuredScore = (jp==='J'?85:55) + (answers[9]===0?15:0) + (answers[5]===0?10:0);

            // æœ€ä½³ç ”å­¦æ­æ¡£ (åŸºäºMBTI)
            const partnerMap = {
                'E': 'Iå‹å°ä¼™ä¼´ï¼ˆäº’è¡¥æ€è€ƒï¼‰',
                'I': 'Eå‹å°ä¼™ä¼´ï¼ˆå¸¦åŠ¨æ°”æ°›ï¼‰',
                'S': 'Nå‹ä¼™ä¼´ï¼ˆæ‹“å±•è§†é‡ï¼‰',
                'N': 'Så‹ä¼™ä¼´ï¼ˆè½åœ°ç»†èŠ‚ï¼‰',
                'T': 'Få‹ä¼™ä¼´ï¼ˆç…§é¡¾æ„Ÿå—ï¼‰',
                'F': 'Tå‹ä¼™ä¼´ï¼ˆç†æ€§åˆ†æï¼‰',
                'J': 'På‹ä¼™ä¼´ï¼ˆçµæ´»åˆ›æ„ï¼‰',
                'P': 'Jå‹ä¼™ä¼´ï¼ˆè§„åˆ’ä¿éšœï¼‰'
            };
            const bestPartner = partnerMap[ie] + 'ã€' + partnerMap[sn] + 'ã€' + partnerMap[tf];

            // åäººæ¦œæ · (åŸºäºMBTIç²—ç•¥)
            const famousMap = {
                'ISTJ': 'ä¹”æ²»Â·åç››é¡¿ï¼ˆä¸¥è°¨æ²»å†›ï¼‰', 'ISFJ': 'ç‰¹è•¾èä¿®å¥³ï¼ˆæ— ç§å¥‰çŒ®ï¼‰', 'INFJ': 'é©¬ä¸Â·è·¯å¾·Â·é‡‘ï¼ˆæ¢¦æƒ³å®¶ï¼‰', 'INTJ': 'è‰¾è¨å…‹Â·ç‰›é¡¿ï¼ˆç§‘å­¦é©å‘½ï¼‰',
                'ISTP': 'æå¥¥çº³å¤šÂ·è¾¾Â·èŠ¬å¥‡ï¼ˆåŠ¨æ‰‹åˆ›é€ ï¼‰', 'ISFP': 'è«æ‰ç‰¹ï¼ˆè‰ºæœ¯å¤©æ‰ï¼‰', 'INFP': 'JÂ·KÂ·ç½—ç³ï¼ˆå¥‡å¹»æ–‡å­¦ï¼‰', 'INTP': 'çˆ±å› æ–¯å¦ï¼ˆç›¸å¯¹è®ºï¼‰',
                'ESTP': 'æ¬§å†…æ–¯ç‰¹Â·æµ·æ˜å¨ï¼ˆå†’é™©æ–‡å­¦ï¼‰', 'ESFP': 'ç›ä¸½è²Â·æ¢¦éœ²ï¼ˆé­…åŠ›è¡¨æ¼”ï¼‰', 'ENFP': 'é©¬å…‹Â·åæ¸©ï¼ˆå¹½é»˜ç¿æ™ºï¼‰', 'ENTP': 'ç†æŸ¥å¾·Â·è´¹æ›¼ï¼ˆé¡½çš®ç‰©ç†å­¦å®¶ï¼‰',
                'ESTJ': 'äº¨åˆ©Â·ç¦ç‰¹ï¼ˆå·¥ä¸šå·¨æ“˜ï¼‰', 'ESFJ': 'æ³°å‹’Â·æ–¯å¨å¤«ç‰¹ï¼ˆå…³çˆ±ç²‰ä¸ï¼‰', 'ENFJ': 'å¥¥å·´é©¬ï¼ˆé¼“èˆæ¼”è¯´ï¼‰', 'ENTJ': 'æ‹¿ç ´ä»‘ï¼ˆå†›äº‹æˆ˜ç•¥ï¼‰'
            };
            const famous = famousMap[mbti] || 'æœªçŸ¥ï¼Œä½†ä½ æ³¨å®šä¸å‡¡';

            // æ ¹æ®åŠ¨ç‰©ç”Ÿæˆæ‚„æ‚„è¯
            const whisperMap = {
                'æµ·è±š': 'ä½ çš„çƒ­æƒ…èƒ½ç‚¹äº®æ•´ä¸ªè¥åœ°',
                'ç‹¼': 'ä½ çš„æ´å¯Ÿä¼šå¸¦é¢†å›¢é˜Ÿå‘ç°æ›´æ·±çš„æ„ä¹‰',
                'é¹°': 'ä½ çš„è¿œè§ä¼šæŒ‡å¼•å¤§å®¶èµ°å‘æ›´é«˜å¤„',
                'ç‹®å­': 'ä½ çš„é¢†å¯¼åŠ›è®©å›¢é˜Ÿå……æ»¡ä¿¡å¿ƒ',
                'æµ·ç‹¸': 'ä½ çš„ç»†è‡´è®©æ¯ä¸ªä»»åŠ¡éƒ½å®Œç¾è½åœ°',
                'å¤§è±¡': 'ä½ çš„æ¸©æš–è®©æ¯ä¸ªäººéƒ½æ„Ÿåˆ°å®‰å¿ƒ',
                'çŒ«å¤´é¹°': 'ä½ çš„æ™ºæ…§æ€»èƒ½åœ¨å…³é”®æ—¶åˆ»è§£å†³é—®é¢˜',
                'ç‹ç‹¸': 'ä½ çš„æœºæ™ºè®©ç ”å­¦å……æ»¡æƒŠå–œ',
                'æ°´ç­': 'ä½ çš„æ´»åŠ›æ„ŸæŸ“ç€èº«è¾¹æ¯ä¸€ä¸ªäºº',
                'è´è¶': 'ä½ çš„åˆ›æ„ä¸ºç ”å­¦å¢æ·»è‰²å½©',
                'é¹¿': 'ä½ çš„å®‰é™ä¸­è•´å«ç€å¼ºå¤§çš„è‡ªç„¶åŠ›é‡',
                'çŒ«': 'ä½ çš„ç‹¬ç«‹æ“ä½œèƒ½åŠ›æ€»èƒ½æå®šå¤æ‚å·¥å…·',
                'é¹¦é¹‰': 'ä½ çš„å£æ‰è®©æ±‡æŠ¥ç¯èŠ‚å¤§æ”¾å¼‚å½©',
                'é©¬': 'ä½ çš„åˆä½œç²¾ç¥è®©å›¢é˜Ÿæ— å¾€ä¸åˆ©',
                'ç‹—': 'ä½ çš„å¿ è¯šå’Œçƒ­æƒ…æ˜¯æœ€ä½³é˜Ÿå‹',
                'ç‹®é¹«': 'ä½ å…¼å…·æ™ºæ…§ä¸å‹‡æ°”ï¼Œæ³¨å®šä¸å‡¡'
            };
            const whisper = whisperMap[animal.name] || 'ä½ çš„ç‹¬ç‰¹è§†è§’ä¼šè®©è¿™æ¬¡ç ”å­¦å˜å¾—ä¸ä¸€æ ·';

            return {
                mbti, animal, travelImage, colorName, colorHex, uniqueRec, 
                learnStyle, learnMethod, energySource, decisionPref, actionStyle, fieldTag,
                scores: [
                    { label: 'æ¢ç´¢ç²¾ç¥', val: Math.min(exploreScore,98) },
                    { label: 'ç¤¾äº¤èƒ½é‡', val: Math.min(socialScore,98) },
                    { label: 'åŠ¨æ‰‹å€¾å‘', val: Math.min(handsOnScore,98) },
                    { label: 'æ·±åº¦æ€è€ƒ', val: Math.min(deepThinkScore,98) },
                    { label: 'å†’é™©æŒ‡æ•°', val: Math.min(adventurousScore,98) },
                    { label: 'è§„åˆ’èƒ½åŠ›', val: Math.min(structuredScore,98) }
                ],
                bestPartner, famous, whisper,
                description: `ä½ æ˜¯ä¸€ä½${travelImage}å‹ç ”å­¦å°‘å¹´ï¼Œæ‹¥æœ‰${animal.name}èˆ¬çš„${animal.desc}ã€‚ä½ åçˆ±${colorName}ï¼Œè±¡å¾${colorName==='æ£®æ—ç»¿'?'è‡ªç„¶ç”Ÿæœºä¸æ¢ç´¢':(colorName==='å¤åŸèµ­'?'å†å²åšé‡ä¸æ–‡åŒ–':(colorName==='åˆ›æ„æ©™'?'çµæ„Ÿæ´»åŠ›ä¸è¡¨è¾¾':'æœªæ¥ç§‘æŠ€ä¸è¿œè§'))}ã€‚`
            };
        }

        // æ¸²æŸ“æŠ¥å‘Š
        function showReport(report) {
            const html = `
                <!-- ä¸»å¾½ç« åŒº -->
                <div class="report-card badge-large" style="padding: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span class="mbti-display">${report.mbti}</span>
                        <div class="color-dot" style="background: ${report.colorHex};"></div>
                    </div>
                    <div class="pill-container">
                        <span class="pill"><i class="fas fa-hiking"></i> ${report.travelImage}</span>
                        <span class="pill"><span class="animal-icon">${report.animal.icon}</span> ${report.animal.name} Â· ${report.animal.desc}</span>
                        <span class="pill"><i class="fas fa-palette"></i> ä¸“å±è‰²: ${report.colorName}</span>
                        <span class="pill"><i class="fas fa-graduation-cap"></i> ${report.learnStyle}</span>
                    </div>
                    <p style="background: #ffffffb3; padding: 16px; border-radius: 28px; font-size: 15px; margin-top: 10px;">âœ¨ ${report.description}</p>
                </div>

                <!-- å…­ç»´èƒ½åŠ›é›·è¾¾å›¾ï¼ˆè¿›åº¦æ¡ï¼‰ -->
                <div class="report-card progress-chart">
                    <h4 style="margin-bottom: 16px;"><i class="fas fa-chart-pie"></i> ç ”å­¦å…­ç»´èƒ½é‡</h4>
                    ${report.scores.map(s => `
                        <div class="chart-bar">
                            <span class="bar-label">${s.label}</span>
                            <div class="bar-bg"><div class="bar-fill" style="width: ${s.val}%;"></div></div>
                            <span style="width: 35px;">${s.val}%</span>
                        </div>
                    `).join('')}
                </div>

                <!-- åŒå¡ç‰‡ï¼šæœ€ä½³æ­æ¡£ & åäººæ¦œæ · -->
                <div class="mini-grid">
                    <div class="mini-card">
                        <i class="fas fa-user-friends" style="color: #1e3c72; font-size: 22px;"></i>
                        <h4 style="margin: 8px 0 4px;">æœ€ä½³ç ”å­¦æ­æ¡£</h4>
                        <p style="font-size: 14px;">${report.bestPartner}</p>
                        <div style="margin-top: 8px; background: #eaf1fb; border-radius: 20px; padding: 6px 12px; font-size:13px;">ä¸€èµ·æ¢ç´¢ï¼Œäº‹åŠåŠŸå€</div>
                    </div>
                    <div class="mini-card">
                        <i class="fas fa-star" style="color: #f5b342; font-size: 22px;"></i>
                        <h4 style="margin: 8px 0 4px;">å†å²ä¸Šçš„ä½ </h4>
                        <p style="font-size: 14px;">âœ¨ ${report.famous}</p>
                        <div style="margin-top: 8px; font-size:13px;">åŒæ¬¾æ€§æ ¼çš„ä¼Ÿå¤§çµé­‚</div>
                    </div>
                </div>

                <!-- ç ”å­¦é£æ ¼æ·±åº¦è§£æ -->
                <div class="report-card">
                    <h4><i class="fas fa-microscope"></i> æ€§æ ¼æ·±åº¦è§£è¯»ï¼ˆç ”å­¦ç‰ˆï¼‰</h4>
                    <div class="insight-box">
                        <p><strong>ğŸ” è®¤çŸ¥é£æ ¼ï¼š</strong> ${report.learnStyle} â€” ä½ é€šè¿‡${report.learnMethod}å¸æ”¶çŸ¥è¯†æœ€å¿«ï¼Œåœ¨ç ”å­¦ä¸­åº”å¤šå®‰æ’ç›¸åº”ç¯èŠ‚ã€‚</p>
                        <p><strong>ğŸ§­ æƒ…ç»ªèƒ½é‡ï¼š</strong> ${report.energySource}</p>
                        <p><strong>ğŸ¯ å†³ç­–åå¥½ï¼š</strong> ${report.decisionPref}</p>
                        <p><strong>ğŸ“… è¡ŒåŠ¨æ–¹å¼ï¼š</strong> ${report.actionStyle}</p>
                    </div>
                </div>

                <!-- è¶£å‘³æ ‡ç­¾äº‘ & ç ”å­¦å¯„è¯­ -->
                <div class="report-card" style="background: linear-gradient(145deg, #ffffff, #f2f9ff);">
                    <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px;">
                        <span class="match-tag" style="background: #ffb66c;">#${report.animal.name}äººæ ¼</span>
                        <span class="match-tag" style="background: #6c9ac3;">#${report.travelImage}</span>
                        <span class="match-tag" style="background: #8f77b5;">#${report.colorName}æ°”è´¨</span>
                        <span class="match-tag" style="background: #4caf7a;">#${report.fieldTag}</span>
                    </div>
                    <div class="quote">
                        <i class="fas fa-quote-left" style="color:#9bb7d4;"></i> ç»™å­©å­çš„æ‚„æ‚„è¯ï¼š${report.whisper}ã€‚ç ”å­¦è·¯ä¸Šï¼Œå‹‡æ•¢åšè‡ªå·±ï¼
                    </div>
                </div>

                <!-- æ¨èç ”å­¦ç±»å‹ (æ— å…·ä½“å•†å“) -->
                <div class="report-card" style="text-align: center;">
                    <i class="fas fa-compass" style="font-size: 30px; color: #1e3c72;"></i>
                    <h4 style="margin: 8px;">æ ¹æ®ç‰¹è´¨ï¼Œä¼˜å…ˆæ¢ç´¢</h4>
                    <div>
                        ${report.uniqueRec.map(t => `<span class="match-tag">${t}</span>`).join('')}
                    </div>
                    <p style="margin-top: 12px; font-size: 14px;">åç»­å¯åœ¨å¹³å°ç­›é€‰å¯¹åº”ç±»å‹ï¼Œå‘ç°ä¸“å±ç ”å­¦é¡¹ç›®</p>
                </div>
            `;
            document.getElementById('reportContent').innerHTML = html;
        }

        // æäº¤æŒ‰é’®
        document.getElementById('submitQuiz').addEventListener('click', function() {
            const answers = getAnswers();
            if (!answers) return;
            const report = computeReport(answers);
            document.getElementById('quizSection').classList.add('hidden');
            document.getElementById('reportSection').classList.remove('hidden');
            showReport(report);
        });

        // é‡æ–°æµ‹è¯„
        document.getElementById('restartQuiz').addEventListener('click', function() {
            document.getElementById('quizSection').classList.remove('hidden');
            document.getElementById('reportSection').classList.add('hidden');
            document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
            document.querySelectorAll('.option-item').forEach(el => el.classList.remove('selected'));
        });
    })();
</script>
</body>
</html>

```
